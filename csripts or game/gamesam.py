from random import *  # –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –≤—Å–µ –∏–∑ random
from turtle import *  # –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –≤—Å–µ –∏–∑ turtle
from freegames import vector  # –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º vector –∏–∑ freegames

INITIAL_BALL_SPEED = 5  # –∑–∞–¥–∞–µ–º –Ω–∞—á–∞–ª—å–Ω—É—é —Å–∫–æ—Ä–æ—Å—Ç—å —à–∞—Ä–æ–≤
INITIAL_KIVI_SPEED = 3  # –∑–∞–¥–∞–µ–º –Ω–∞—á–∞–ª—å–Ω—É—é —Å–∫–æ—Ä–æ—Å—Ç—å –∫–∞–º–Ω–µ–π

ball_speed = INITIAL_BALL_SPEED  # —Ç–µ–∫—É—â–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å —à–∞—Ä–æ–≤
kivi_speed = INITIAL_KIVI_SPEED  # —Ç–µ–∫—É—â–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å –∫–∞–º–Ω–µ–π
speed_increase_amount = 0.2  # —à–∞–≥ —É–≤–µ–ª–∏—á–µ–Ω–∏—è —Å–∫–æ—Ä–æ—Å—Ç–∏
speed_increase_interval_ms = 6000  # –∏–Ω—Ç–µ—Ä–≤–∞–ª —É–≤–µ–ª–∏—á–µ–Ω–∏—è —Å–∫–æ—Ä–æ—Å—Ç–∏ –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö
maxspeed_baal = 8  # –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å —à–∞—Ä–æ–≤
maxspeed_kivi = 7  # –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å –∫–∞–º–Ω–µ–π

game_state = 'playing'  # —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏–≥—Ä—ã

bird = vector(0, 0)  # –ø–æ–∑–∏—Ü–∏—è –ø—Ç–∏—Ü—ã
balls = []  # —Å–ø–∏—Å–æ–∫ —à–∞—Ä–æ–≤
kivis = []  # —Å–ø–∏—Å–æ–∫ –∫–∞–º–Ω–µ–π

bgcolor("lightblue")  # —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ü–≤–µ—Ç —Ñ–æ–Ω–∞

def tap(x, y):  # —Ñ—É–Ω–∫—Ü–∏—è –ø—Ä—ã–∂–∫–∞ –ø—Ç–∏—Ü—ã –ø–æ –∫–ª–∏–∫—É
    if game_state == 'playing':  # –ø—Ä–æ–≤–µ—Ä—è–µ–º –∏–¥–µ—Ç –ª–∏ –∏–≥—Ä–∞
        up = vector(0, 40)  # –≤–µ–∫—Ç–æ—Ä –¥–≤–∏–∂–µ–Ω–∏—è –≤–≤–µ—Ä—Ö
        bird.move(up)  # –¥–≤–∏–≥–∞–µ–º –ø—Ç–∏—Ü—É –≤–≤–µ—Ä—Ö

def inside(point):  # –ø—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ª–∏ —Ç–æ—á–∫–∞ –≤ –ø–æ–ª–µ
    return -200 < point.x < 200 and -200 < point.y < 200  # –≤–æ–∑–≤—Ä–∞—â–∞–µ–º True –µ—Å–ª–∏ –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö

def draw():  # —Ñ—É–Ω–∫—Ü–∏—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ —ç–∫—Ä–∞–Ω–∞
    clear()  # –æ—á–∏—â–∞–µ–º —ç–∫—Ä–∞–Ω

    if game_state == 'playing':  # –µ—Å–ª–∏ –∏–≥—Ä–∞ –∏–¥–µ—Ç
        goto(bird.x, bird.y)  # –ø–µ—Ä–µ–º–µ—â–∞–µ–º—Å—è –∫ –ø–æ–∑–∏—Ü–∏–∏ –ø—Ç–∏—Ü—ã
        write('ü¶â', align='center', font=('Arial', 16, 'normal'))  # —Ä–∏—Å—É–µ–º –ø—Ç–∏—Ü—É

        for ball in balls:  # –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —à–∞—Ä–∞
            goto(ball.x, ball.y)  # –ø–µ—Ä–µ–º–µ—â–∞–µ–º—Å—è –∫ —à–∞—Ä—É
            dot(20, 'black')  # —Ä–∏—Å—É–µ–º —á–µ—Ä–Ω—ã–π —à–∞—Ä

        for kivi in kivis:  # –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–∞–º–Ω—è
            goto(kivi.x, kivi.y)  # –ø–µ—Ä–µ–º–µ—â–∞–µ–º—Å—è –∫ –∫–∞–º–Ω—é
            dot(30, 'grey')  # —Ä–∏—Å—É–µ–º —Å–µ—Ä—ã–π –∫–∞–º–µ–Ω—å

    elif game_state == 'game_over':  # –µ—Å–ª–∏ –∏–≥—Ä–∞ –∑–∞–∫–æ–Ω—á–µ–Ω–∞
        goto(0, 20)  # –ø–µ—Ä–µ–º–µ—â–∞–µ–º—Å—è –∫ —Ü–µ–Ω—Ç—Ä—É —Å–≤–µ—Ä—Ö—É
        write("–í—ã –ø—Ä–æ–∏–≥—Ä–∞–ª–∏!", align="center", font=("Arial", 24, "bold"))  # –ø–∏—à–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ
        goto(0, -20)  # –ø–µ—Ä–µ–º–µ—â–∞–µ–º—Å—è –Ω–∏–∂–µ
        write("–ù–∞–∂–º–∏—Ç–µ 'R' –¥–ª—è –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞", align="center", font=("Arial", 16, "normal"))  # –ø–∏—à–µ–º –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é

        goto(bird.x, bird.y)  # –ø–µ—Ä–µ–º–µ—â–∞–µ–º—Å—è –∫ –ø–æ–∑–∏—Ü–∏–∏ –ø—Ç–∏—Ü—ã
        write('ü™∂', align='center', font=('Arial', 16, 'normal'))  # —Ä–∏—Å—É–µ–º –º–µ—Ä—Ç–≤—É—é –ø—Ç–∏—Ü—É

    update()  # –æ–±–Ω–æ–≤–ª—è–µ–º —ç–∫—Ä–∞–Ω

def increase_speed():  # —Ñ—É–Ω–∫—Ü–∏—è —É–≤–µ–ª–∏—á–µ–Ω–∏—è —Å–∫–æ—Ä–æ—Å—Ç–∏
    global ball_speed, kivi_speed  # –∏—Å–ø–æ–ª—å–∑—É–µ–º –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

    if game_state != 'playing':  # –µ—Å–ª–∏ –∏–≥—Ä–∞ –Ω–µ –∏–¥–µ—Ç
        return  # –≤—ã—Ö–æ–¥–∏–º –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏

    ball_speed += speed_increase_amount  # —É–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Å–∫–æ—Ä–æ—Å—Ç—å —à–∞—Ä–æ–≤
    if ball_speed > maxspeed_baal:  # –µ—Å–ª–∏ —Å–∫–æ—Ä–æ—Å—Ç—å –±–æ–ª—å—à–µ –º–∞–∫—Å–∏–º—É–º–∞
        ball_speed = maxspeed_baal  # –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π

    kivi_speed += speed_increase_amount  # —É–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Å–∫–æ—Ä–æ—Å—Ç—å –∫–∞–º–Ω–µ–π
    if kivi_speed > maxspeed_kivi:  # –µ—Å–ª–∏ —Å–∫–æ—Ä–æ—Å—Ç—å –±–æ–ª—å—à–µ –º–∞–∫—Å–∏–º—É–º–∞
        kivi_speed = maxspeed_kivi  # –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π

    if game_state == 'playing':  # –µ—Å–ª–∏ –∏–≥—Ä–∞ –∏–¥–µ—Ç
        ontimer(increase_speed, speed_increase_interval_ms)  # –≤—ã–∑—ã–≤–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é —Å–Ω–æ–≤–∞ —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä–≤–∞–ª

def move():  # –æ—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–≤–∏–∂–µ–Ω–∏—è –æ–±—ä–µ–∫—Ç–æ–≤
    global game_state  # –∏—Å–ø–æ–ª—å–∑—É–µ–º –≥–ª–æ–±–∞–ª—å–Ω—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é —Å–æ—Å—Ç–æ—è–Ω–∏—è

    if game_state != 'playing':  # –µ—Å–ª–∏ –∏–≥—Ä–∞ –Ω–µ –∏–¥–µ—Ç
        return  # –≤—ã—Ö–æ–¥–∏–º –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏

    bird.y -= 5  # –ø—Ç–∏—Ü–∞ –ø–∞–¥–∞–µ—Ç –≤–Ω–∏–∑

    for ball in balls:  # –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —à–∞—Ä–∞
        ball.x -= ball_speed  # –¥–≤–∏–≥–∞–µ–º —à–∞—Ä –≤–ª–µ–≤–æ –Ω–∞ —Å–∫–æ—Ä–æ—Å—Ç—å

    for kivi in kivis:  # –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–∞–º–Ω—è
        kivi.x -= kivi_speed  # –¥–≤–∏–≥–∞–µ–º –∫–∞–º–µ–Ω—å –≤–ª–µ–≤–æ –Ω–∞ —Å–∫–æ—Ä–æ—Å—Ç—å

    if randrange(10) == 0:  # —Å —à–∞–Ω—Å–æ–º –æ–¥–∏–Ω –∏–∑ –¥–µ—Å—è—Ç–∏
        y = randrange(-199, 199)  # —Å–ª—É—á–∞–π–Ω–∞—è –≤—ã—Å–æ—Ç–∞
        ball = vector(199, y)  # —Å–æ–∑–¥–∞–µ–º —à–∞—Ä —Å–ø—Ä–∞–≤–∞
        balls.append(ball)  # –¥–æ–±–∞–≤–ª—è–µ–º —à–∞—Ä –≤ —Å–ø–∏—Å–æ–∫

        y = randrange(-199, 199)  # —Å–ª—É—á–∞–π–Ω–∞—è –≤—ã—Å–æ—Ç–∞
        kivi = vector(199, y)  # —Å–æ–∑–¥–∞–µ–º –∫–∞–º–µ–Ω—å —Å–ø—Ä–∞–≤–∞
        kivis.append(kivi)  # –¥–æ–±–∞–≤–ª—è–µ–º –∫–∞–º–µ–Ω—å –≤ —Å–ø–∏—Å–æ–∫

    while len(balls) > 0 and not inside(balls[0]):  # –ø–æ–∫–∞ –ø–µ—Ä–≤—ã–π —à–∞—Ä –∑–∞ –ø—Ä–µ–¥–µ–ª–∞–º–∏
        balls.pop(0)  # —É–¥–∞–ª—è–µ–º –ø–µ—Ä–≤—ã–π —à–∞—Ä

    while len(kivis) > 0 and not inside(kivis[0]):  # –ø–æ–∫–∞ –ø–µ—Ä–≤—ã–π –∫–∞–º–µ–Ω—å –∑–∞ –ø—Ä–µ–¥–µ–ª–∞–º–∏
        kivis.pop(0)  # —É–¥–∞–ª—è–µ–º –ø–µ—Ä–≤—ã–π –∫–∞–º–µ–Ω—å

    if not inside(bird):  # –µ—Å–ª–∏ –ø—Ç–∏—Ü–∞ –≤—ã—à–ª–∞ –∑–∞ –≥—Ä–∞–Ω–∏—Ü—ã
        game_state = 'game_over'  # –º–µ–Ω—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏–≥—Ä—ã
        draw()  # –æ—Ç—Ä–∏—Å–æ–≤—ã–≤–∞–µ–º —ç–∫—Ä–∞–Ω
        return  # –≤—ã—Ö–æ–¥–∏–º –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏

    for ball in balls:  # –ø—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–µ —Å —à–∞—Ä–∞–º–∏
        if abs(ball - bird) < 13:  # –µ—Å–ª–∏ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–Ω—å—à–µ 13
            game_state = 'game_over'  # –∏–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞
            draw()  # –æ—Ç—Ä–∏—Å–æ–≤—ã–≤–∞–µ–º —ç–∫—Ä–∞–Ω
            return  # –≤—ã—Ö–æ–¥–∏–º –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏

    for kivi in kivis:  # –ø—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–µ —Å –∫–∞–º–Ω—è–º–∏
        if abs(kivi - bird) < 20:  # –µ—Å–ª–∏ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–Ω—å—à–µ 20
            game_state = 'game_over'  # –∏–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞
            draw()  # –æ—Ç—Ä–∏—Å–æ–≤—ã–≤–∞–µ–º —ç–∫—Ä–∞–Ω
            return  # –≤—ã—Ö–æ–¥–∏–º –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏

    draw()  # –æ—Ç—Ä–∏—Å–æ–≤—ã–≤–∞–µ–º —Ç–µ–∫—É—â–∏–π –∫–∞–¥—Ä

    if game_state == 'playing':  # –µ—Å–ª–∏ –∏–≥—Ä–∞ –∏–¥–µ—Ç
        ontimer(move, 30)  # –≤—ã–∑—ã–≤–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é —Å–Ω–æ–≤–∞ —á–µ—Ä–µ–∑ 30 –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥

def restart_game():  # —Ñ—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –∏–≥—Ä—ã
    global game_state, bird, balls, kivis, ball_speed, kivi_speed  # –∏—Å–ø–æ–ª—å–∑—É–µ–º –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

    if game_state == 'game_over':  # –µ—Å–ª–∏ –∏–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞
        game_state = 'playing'  # –º–µ–Ω—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –Ω–∞ –∏–≥—Ä–∞–µ–º
        bird.x = 0  # —Å—Ç–∞–≤–∏–º –ø—Ç–∏—Ü—É –≤ —Ü–µ–Ω—Ç—Ä –ø–æ —Ö
        bird.y = 0  # —Å—Ç–∞–≤–∏–º –ø—Ç–∏—Ü—É –≤ —Ü–µ–Ω—Ç—Ä –ø–æ —É
        balls.clear()  # –æ—á–∏—â–∞–µ–º —Å–ø–∏—Å–æ–∫ —à–∞—Ä–æ–≤
        kivis.clear()  # –æ—á–∏—â–∞–µ–º —Å–ø–∏—Å–æ–∫ –∫–∞–º–Ω–µ–π
        ball_speed = INITIAL_BALL_SPEED  # —Å–±—Ä–∞—Å—ã–≤–∞–µ–º —Å–∫–æ—Ä–æ—Å—Ç—å —à–∞—Ä–æ–≤
        kivi_speed = INITIAL_KIVI_SPEED  # —Å–±—Ä–∞—Å—ã–≤–∞–µ–º —Å–∫–æ—Ä–æ—Å—Ç—å –∫–∞–º–Ω–µ–π
        move()  # –∑–∞–ø—É—Å–∫–∞–µ–º –∏–≥—Ä–æ–≤–æ–π —Ü–∏–∫–ª –∑–∞–Ω–æ–≤–æ
        increase_speed()  # –∑–∞–ø—É—Å–∫–∞–µ–º —Ç–∞–π–º–µ—Ä —É–≤–µ–ª–∏—á–µ–Ω–∏—è —Å–∫–æ—Ä–æ—Å—Ç–∏ –∑–∞–Ω–æ–≤–æ

setup(420, 420, 370, 0)  # —Å–æ–∑–¥–∞–µ–º –æ–∫–Ω–æ —Ä–∞–∑–º–µ—Ä–æ–º 420 –Ω–∞ 420 —Å –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º
hideturtle()  # —Å–∫—Ä—ã–≤–∞–µ–º –∫—É—Ä—Å–æ—Ä —á–µ—Ä–µ–ø–∞—Ö–∏
up()  # –ø–æ–¥–Ω–∏–º–∞–µ–º –ø–µ—Ä–æ —á—Ç–æ–±—ã –Ω–µ —Ä–∏—Å–æ–≤–∞—Ç—å –ª–∏–Ω–∏–∏
tracer(False)  # –æ—Ç–∫–ª—é—á–∞–µ–º –∞–Ω–∏–º–∞—Ü–∏—é –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
listen()  # –≤–∫–ª—é—á–∞–µ–º –æ–±—Ä–∞–±–æ—Ç–∫—É –Ω–∞–∂–∞—Ç–∏–π –∫–ª–∞–≤–∏—à
onkey(restart_game, 'r')  # –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∏–≥—Ä—ã –ø–æ –Ω–∞–∂–∞—Ç–∏—é r
onkey(restart_game, 'R')  # –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∏–≥—Ä—ã –ø–æ –Ω–∞–∂–∞—Ç–∏—é R
increase_speed()  # –∑–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–æ—Ü–µ—Å—Å —É–≤–µ–ª–∏—á–µ–Ω–∏—è —Å–∫–æ—Ä–æ—Å—Ç–∏
onscreenclick(tap)  # –ø—Ä—ã–∂–æ–∫ –ø—Ç–∏—Ü—ã –ø–æ –∫–ª–∏–∫—É –º—ã—à–∏
move()  # –∑–∞–ø—É—Å–∫–∞–µ–º –∏–≥—Ä–æ–≤–æ–π —Ü–∏–∫–ª –¥–≤–∏–∂–µ–Ω–∏—è
done()  # –∑–∞–ø—É—Å–∫–∞–µ–º –≥–ª–∞–≤–Ω—ã–π —Ü–∏–∫–ª turtle
